{% extends 'base.html' %}
{% load static %}

{% block title %}Student Dashboard - SRMS{% endblock %}

{% block page_heading %}
  <div class="d-flex align-items-center justify-content-between">
    <h1>Student Dashboard</h1>
    <div class="welcome-message">
      <small class="text-muted">Welcome back, <strong>{{ student.first_name }}</strong></small>
    </div>
  </div>
{% endblock %}

{% block content %}
<section class="section dashboard">
  <div class="row">
    <!-- Right side columns -->
    <div class="col-lg-4">
      <!-- Student Information -->
      <div class="card mb-4 shadow-sm">
        <div class="card-body">
          <h5 class="card-title d-flex align-items-center">
            <i class="bi bi-info-circle me-2"></i>
            Personal Information
          </h5>

          <div class="row mb-4">
            <div class="col-12 text-center">
              {% if student.profile_picture %}
                <div class="position-relative d-inline-block">
                  <img src="{{ student.profile_picture.url }}" alt="Profile Picture" 
                       class="rounded-circle border border-3 border-primary shadow-sm" 
                       style="width: 120px; height: 120px; object-fit: cover;">
                  <span class="position-absolute bottom-0 end-0 bg-success rounded-circle border border-2 border-white" 
                        style="width: 24px; height: 24px;"></span>
                </div>
              {% else %}
                <div class="rounded-circle bg-gradient-primary d-flex align-items-center justify-content-center mx-auto shadow-sm" 
                     style="width: 120px; height: 120px;">
                  <i class="bi bi-person-circle text-white" style="font-size: 4rem;"></i>
                </div>
              {% endif %}
              <div class="mt-3">
                <h6 class="mb-1">{{ student.first_name }} {{ student.last_name }}</h6>
                <p class="text-muted small mb-0">{{ student.get_department_display }}</p>
              </div>
            </div>
          </div>

          <div class="student-info">
            <div class="info-item row mb-3">
              <div class="col-5">
                <span class="fw-semibold text-muted">
                  <i class="bi bi-envelope me-1"></i>
                  Email:
                </span>
              </div>
              <div class="col-7">
                <span class="text-break">{{ student.email }}</span>
              </div>
            </div>
            
            <div class="info-item row mb-3">
              <div class="col-5">
                <span class="fw-semibold text-muted">
                  <i class="bi bi-book me-1"></i>
                  Program:
                </span>
              </div>
              <div class="col-7">
                <span>{{ student.get_program_display }}</span>
              </div>
            </div>
            
            <div class="info-item row mb-3">
              <div class="col-5">
                <span class="fw-semibold text-muted">
                  <i class="bi bi-mortarboard me-1"></i>
                  Level:
                </span>
              </div>
              <div class="col-7">
                <span>{{ student.get_academic_level_display }}</span>
              </div>
            </div>
            
            <div class="info-item row mb-3">
              <div class="col-5">
                <span class="fw-semibold text-muted">
                  <i class="bi bi-building me-1"></i>
                  Department:
                </span>
              </div>
              <div class="col-7">
                <span>{{ student.get_department_display }}</span>
              </div>
            </div>
            
            <div class="info-item row mb-3">
              <div class="col-5">
                <span class="fw-semibold text-muted">
                  <i class="bi bi-bank me-1"></i>
                  Faculty:
                </span>
              </div>
              <div class="col-7">
                <span>{{ student.get_faculty_display }}</span>
              </div>
            </div>
            
            <div class="info-item row mb-3">
              <div class="col-5">
                <span class="fw-semibold text-muted">
                  <i class="bi bi-calendar-plus me-1"></i>
                  Joined:
                </span>
              </div>
              <div class="col-7">
                <span>{{ student.created_at|date:"M Y" }}</span>
              </div>
            </div>
          </div>

          <div class="mt-4 pt-3 border-top">
            <div class="row text-center">
              <div class="col-4">
                <div class="text-primary">
                  <i class="bi bi-star-fill"></i>
                  <div class="fw-bold">4.2</div>
                  <small class="text-muted">GPA</small>
                </div>
              </div>
              <div class="col-4">
                <div class="text-success">
                  <i class="bi bi-book-fill"></i>
                  <div class="fw-bold">12</div>
                  <small class="text-muted">Courses</small>
                </div>
              </div>
              <div class="col-4">
                <div class="text-info">
                  <i class="bi bi-trophy-fill"></i>
                  <div class="fw-bold">3</div>
                  <small class="text-muted">Awards</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End Student Information -->
    </div>
    <!-- End Right side columns -->

    <!-- Left side columns -->
    <div class="col-xl-8">
      <div class="row">

        <!-- Student Profile Card -->
        <div class="col-6 mb-4">
          <div class="card info-card sales-card h-100 shadow-sm">
            <div class="card-body">
              <h5 class="card-title d-flex align-items-center">
                <i class="bi bi-person-circle me-2"></i>
                My Profile
              </h5>

              <div class="d-flex align-items-center">
                <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                  <i class="bi bi-person-circle"></i>
                </div>
                <div class="ps-3">
                  <h6 class="mb-1">{{ student.first_name }} {{ student.last_name }}</h6>
                  <span class="text-muted small">{{ student.department|title }}</span>
                  <div class="mt-1">
                    <span class="badge bg-primary-subtle text-primary">Active Student</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- End Student Profile Card -->

        <!-- Academic Level Card -->
        <div class="col-6 mb-4">
          <div class="card info-card revenue-card h-100 shadow-sm">
            <div class="card-body">
              <h5 class="card-title d-flex align-items-center">
                <i class="bi bi-mortarboard me-2"></i>
                Academic Level
              </h5>

              <div class="d-flex align-items-center">
                <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                  <i class="bi bi-mortarboard"></i>
                </div>
                <div class="ps-3">
                  <h6 class="mb-1">{{ student.get_academic_level_display }}</h6>
                  <span class="text-muted small">{{ student.get_program_display }}</span>
                  <div class="mt-1">
                    <span class="badge bg-success-subtle text-success">Current Level</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- End Academic Level Card -->

        <!-- Faculty Card -->
        <div class="col-12 mb-4">
          <div class="card info-card customers-card h-100 shadow-sm">
            <div class="card-body">
              <h5 class="card-title d-flex align-items-center">
                <i class="bi bi-building me-2"></i>
                Faculty
              </h5>

              <div class="d-flex align-items-center">
                <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                  <i class="bi bi-building"></i>
                </div>
                <div class="ps-3">
                  <h6 class="mb-1">{{ student.get_faculty_display }}</h6>
                  <span class="text-muted small">Department: {{ student.get_department_display }}</span>
                  <div class="mt-1">
                    <span class="badge bg-info-subtle text-info">{{ student.get_faculty_display|truncatechars:15 }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- End Faculty Card -->

        <!-- Quick Actions -->
        <div class="col-12 mb-4">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title d-flex align-items-center mb-4">
                <i class="bi bi-lightning-charge me-2"></i>
                Quick Actions
              </h5>

              <div class="row g-3">
                <div class="col-md-3 col-sm-6">
                  <a href="{% url 'students:student_profile' %}" class="btn btn-outline-primary w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                    <i class="bi bi-person-gear mb-2" style="font-size: 1.5rem;"></i>
                    <span>Update Profile</span>
                  </a>
                </div>
                <div class="col-md-3 col-sm-6">
                  <a href="#" class="btn btn-outline-success w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                    <i class="bi bi-journal-text mb-2" style="font-size: 1.5rem;"></i>
                    <span>View Courses</span>
                  </a>
                </div>
                <div class="col-md-3 col-sm-6">
                  <a href="#" class="btn btn-outline-info w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                    <i class="bi bi-clipboard-data mb-2" style="font-size: 1.5rem;"></i>
                    <span>View Grades</span>
                  </a>
                </div>
                <div class="col-md-3 col-sm-6">
                  <a href="#" class="btn btn-outline-warning w-100 h-100 d-flex flex-column align-items-center justify-content-center py-3">
                    <i class="bi bi-file-earmark-text mb-2" style="font-size: 1.5rem;"></i>
                    <span>Transcript Request</span>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- End Quick Actions -->
      </div>
    </div>
    <!-- End Left side columns -->
  </div>
</section>
{% endblock %}